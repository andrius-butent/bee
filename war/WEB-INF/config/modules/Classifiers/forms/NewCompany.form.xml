<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
    <!ENTITY infoLabel "padding-bottom: 10px; font-size: 16px; margin-left: 20px; padding-top:20px;">
    <!ENTITY lbl2 "padding-left: 10px; text-align: right; padding-right: 10px; min-width: 130px;">
    <!ENTITY form "NewCompany">
    ]>
<f:Form xmlns="http://www.butent.com/widget"
        xmlns:f="http://www.butent.com/form"
        xmlns:ui="http://www.butent.com/ui"

        name="&form;"
        viewName="Companies"
        favorite="Name"
        caption="=client"
        width="700"
        height="700"
    >
  <FlowPanel class="flexBox-vertical">
    <css id="&form;">
      .&form;-input{
        width: 500px;
      }
      .&form;-table td .bee-InputText,
      .&form;-table td .bee-InputArea,
      .&form;-table td .bee-DataSelector-editableContainer,
      .&form;-table td .bee-MultiSelector-container,
      .&form;-table td .bee-MultiSelector-container-active{
        width: calc(100% - 10px);
        min-width: 200px;
      }
    </css>
    <FlowPanel>
      <Label text="=companyInfo" style="&infoLabel;" />
    </FlowPanel>
    <Table kind="controls" style="margin: 0 0 0 30px;" class="&form;-table">
      <col index="0" cellStyle="&lbl2;" />
      <col index="1" class="&form;-input" />

      <row>
        <Label text="=type" class="bee-required" />
        <DataSelector source="CompanyType" required="true" />
      </row>

      <row>
        <Label text="=name" class="bee-required" />
        <InputText source="Name" visible="true" required="true" />
      </row>

      <row for="Code">
        <Label text="=companyCode" />
        <InputText source="Code" visible="true" />
      </row>

      <row for="VATCode">
        <Label text="=companyVATCode" for="VATCode" />
        <InputText source="VATCode" upperCase="true" />
      </row>

      <row for="CompanyPriority">
        <Label for="CompanyPriority" />
        <DataSelector source="CompanyPriority" />
      </row>

      <row>
        <Label text="=notes" />
        <InputArea source="Notes" visibleLines="5" />
      </row>
    </Table>
    <FlowPanel>
      <Label text="=contactInfo" style="&infoLabel;" /> 
    </FlowPanel>
    <Table kind="controls" style="margin: 0 0 0 30px;" class="&form;-table">
      <col index="0" cellStyle="&lbl2;" />
      <col index="1" class="&form;-input" />
      <row for="Address">
        <Label text="=address" />
        <InputText source="Address" />
      </row>

      <row>
        <Label text="=phone" for="Phone" />
        <InputText source="Phone" />
      </row>

      <row>
        <Label for="Mobile" />
        <InputText source="Mobile" />
      </row>

      <row>
        <Label for="Fax" />
        <InputText source="Fax" />
      </row>

      <row>
        <Label for="EmailId" />
        <DataSelector source="EmailId" maxLength="50" />
      </row>

      <row>
        <Label for="Website" />
        <InputText source="Website" />
      </row>

      <row for="City">
        <Label for="City" />
        <DataSelector source="City" >
          <selectorColumn source="Name" />
          <selectorColumn source="CountryName" />
          <selectorColumn source="CountryCode">
            <ui:renderer type="flag" />
          </selectorColumn>
        </DataSelector>
      </row>

      <row for="Country">
        <Label for="Country" />
        <DataSelector source="Country" >
          <renderToken source="CountryName" />
          <renderToken source="CountryCode" prefix=" (" suffix=")" />
          <selectorColumn source="Name" />
          <selectorColumn source="Code">
            <ui:renderer type="flag" />
          </selectorColumn>
        </DataSelector>
        <Flag source="CountryCode" style="width: 22px;" />
      </row>

      <row>
        <Label for="PostIndex" />
        <InputText source="PostIndex" />
      </row>
    </Table>

    <FlowPanel>
      <Label text="=additionalInfo" style="&infoLabel;" />
    </FlowPanel>

    <Table kind="controls" style="margin: 0 0 25px 30px;" class="&form;-table">
      <col index="0" cellStyle="&lbl2;" />
      <col index="1" class="&form;-input" />
      <row>
        <Label for="CompanySize" />
        <DataSelector source="CompanySize" />
      </row>

      <row for="InformationSource">
        <Label for="InformationSource" />
        <DataSelector source="InformationSource" />
      </row>

      <row for="CompanyRelation">
        <Label text="=companyRelation" data="CompRelTypeStore" />
        <ChildSelector viewName="CompanyRelationTypes" childTable="CompRelTypeStore"
                       targetRelColumn="Company" sourceRelColumn="RelationType" newRowEnabled="true"
                       label="=companyRelationType" data="CompRelTypeStore" />
      </row>

      <row for="CompanyRelationTypeState">
        <Label for="CompanyRelationTypeState" />
        <DataSelector source="CompanyRelationTypeState" />
      </row>

      <row data="CompActStore">
        <Label text="=companyActivities" />
        <ChildSelector viewName="CompanyActivities" childTable="CompActStore"
                       targetRelColumn="Company" sourceRelColumn="Activity"
                       label="=companyActivities" summarize="true" />
      </row>

      <row for="Turnover">
        <Label text="=trdTurnover" />
        <DataSelector source="Turnover" />
      </row>

      <row for="CompanyGroup">
        <Label for="CompanyGroup" />
        <DataSelector source="CompanyGroup" />
      </row>

    </Table>

    <ChildGrid name="CompanyBankAccounts" relColumn="Company" style="min-height: 150px;" />

    <ChildGrid name="CompanyPersons" relColumn="Company" style="min-height: 150px;" />

    <ChildGrid name="CompanyUsers" relColumn="Company" style="min-height: 150px;" />

  </FlowPanel>
</f:Form>