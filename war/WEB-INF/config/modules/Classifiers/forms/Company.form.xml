<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY lbl1 "margin-left: 1em; text-align: right; padding-right: 9px;">
  <!ENTITY inp1 "width: 180px;">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:d="http://www.butent.com/decorator"

  name="Company"
  viewName="Companies"
  caption="=client"
  width="875"
  height="565"
  >
  <FlowPanel class="flexBox-vertical">
    <Table>
      <row>
        <Label text="=name" style="&lbl1;" class="bee-required" />
        <InputText source="Name" style="&inp1;" visible="true" />
        <Label style="&lbl1;" for="CompanyType" />
        <DataSelector source="CompanyType" style="&inp1;"  />
        <Label style="&lbl1;" for="CompanyGroup" />
        <DataSelector source="CompanyGroup" style="&inp1;"  />
      </row>

      <row>
        <Label style="&lbl1;" for="Code" />
        <InputText source="Code" style="&inp1;"/>
        <Label style="&lbl1;" for="VATCode" />
        <InputText source="VATCode" style="&inp1;" upperCase="true" />
        <Label text="=code" style="&lbl1;" module="Transport" for="ExchangeCode" />
        <InputText source="ExchangeCode" style="&inp1;" module="Transport" />
      </row>

      <row>
        <Label style="&lbl1;" for="CompanyPriority" />
        <DataSelector source="CompanyPriority" style="&inp1;" />
        <Label text="=companyRelation" style="&lbl1;" data="CompRelTypeStore" />
        <ChildSelector viewName="CompanyRelationTypes" childTable="CompRelTypeStore"
          targetRelColumn="Company" sourceRelColumn="RelationType" newRowEnabled="true"
          label="=companyRelationType" style="&inp1;" data="CompRelTypeStore" />
        <Label text="=status" style="&lbl1;" for="CompanyRelationTypeState" />
        <DataSelector source="CompanyRelationTypeState" style="&inp1;" />
      </row>
      <row>
  	   <Label style="&lbl1;" for="BankruptcyRisk" text="=clientBankruptcyRisk" />
  	   <DataSelector style="&inp1;" source="BankruptcyRisk" />
       <Label style="&lbl1;" for="DelayedPaymentRisk" text="=clientDelayedPaymentRisk" />
       <DataSelector style="&inp1;" source="DelayedPaymentRisk" />
       <Label style="&lbl1;" for="InvoiceTransferType" text="=invoiceTransferType" />
       <DataSelector style="&inp1;" source="InvoiceTransferType" />
      </row>
      <row data="CompActStore">       
        <Label  text="=companyActivities" style="&lbl1;" />          
        <ChildSelector viewName="CompanyActivities" childTable="CompActStore"
          targetRelColumn="Company" sourceRelColumn="Activity"
          label="=companyActivities" style="&inp1;" summarize="true"/>
      </row>
    </Table>

    <Disclosure open="true">
       <Label text="=contactInfo" style="text-transform: uppercase; " />
       <FlowPanel>
         <xi:include href="widgets/ContactDetails.widget.xml" />
       </FlowPanel>
    </Disclosure>
    
    <Disclosure xmlns="http://www.butent.com/widget" xmlns:xi="http://www.w3.org/2001/XInclude"
      open="false" style="width: 100%;">
      <Label text="=additionalContacts" style="text-transform: uppercase; " />
      <FlowPanel class="flexible" style="min-height: 175px;">
        <ChildGrid name="CompanyContacts" relColumn="Company" style="min-height: 175px;" />
      </FlowPanel>
    </Disclosure>

    <TabbedPages class="flexible" style="margin-top: 15px;">
      <page>
        <text>=financialInfo</text>
        <FlowPanel class="flexBox-horizontal">
          <xi:include href="widgets/CompanyFinancialInfo.widget.xml" />
          <ChildGrid name="CompanyBankAccounts" class="flexible" relColumn="Company" style="min-heght: 150px;"/>
        </FlowPanel>
      </page>

      <page>
        <text>=personContacts</text>
        <ChildGrid name="CompanyPersons" relColumn="Company" />
      </page>

      <page>
        <text>=responsibilities</text>
        <ChildGrid name="CompanyUsers" relColumn="Company" />
      </page>

      <page>
        <text>=additionalInfo</text>
        <FlowPanel style="margin:5px;">
          <Table>
            <row>
              <Label style="&lbl1;" for="CompanySize" />
              <DataSelector source="CompanySize" style="width: 100px;" summarize="true" />
              <Label style="margin-left: 8px; margin-right: 8px;" for="InformationSource" />
              <DataSelector source="InformationSource" style="width: 100px;" summarize="true" />
            </row>
            <row for="Rating">
              <Label text="=rating" style="&lbl1;"/>
              <InputText source="Rating" style="width: 100px;" summarize="true" />
            </row>
          </Table>
        </FlowPanel>
      </page>

      <page>
        <text>=documents</text>
        <ChildGrid name="RelatedDocuments" relColumn="Company" />
      </page>

      <page>
        <text>=objects</text>
        <ChildGrid name="CompanyObjects" relColumn="Company" module="Trade.Acts" />
      </page>
      <page>
        <text>=tradeActs</text>
        <ChildGrid name="CompanyTradeActs" relColumn="Company" module="Trade.Acts" />
      </page>

      <page for="Notes">
        <text>=notes</text>
        <SimplePanel>
          <InputArea source="Notes" class="occupy-1" summarize="true" />
        </SimplePanel>
      </page>  

      <page for="RelatedMessages">
        <text>=mails</text>
        <ChildGrid name="RelatedMessages" relColumn="Company" />
      </page>
      <page for="CompanyActList" module="Calendar">
      	<text>=calListOfActions</text>
      	<ChildGrid name="CompanyActList" relColumn="Company" />
      </page>
      <page for="Tasks">
        <text>=crmTasks</text>
        <ChildGrid name="Tasks" relColumn="Company" />
      </page>
    </TabbedPages>

  </FlowPanel>
</f:Form>