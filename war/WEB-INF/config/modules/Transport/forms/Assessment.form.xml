<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY section "margin-top: 4px;">
  <!ENTITY separator "<hr/>">
  <!ENTITY inline "display:inline-block;">
  <!ENTITY labelLeft "&inline; width:100px; padding-top:1px;">
  <!ENTITY labelRight "&inline; width:60px; padding-top:1px; text-align:right; margin-right:10px;">
  <!ENTITY input "&inline; width:110px;">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  
  name="Assessment" viewName="Assessments" showRowId="true"
  >
  <f:properties reports="PrintOrderLT, PrintOrderEN, PrintOrderRU" />

  <FlowPanel style="padding: 10px 2px 2px 10px;" class="flexBox-vertical bee-tr-assessment-form">
    <FlowPanel style="height:65%; overflow:auto;">
      <FlowPanel style="&section;">
        <Label text="=status" style="&labelLeft;" />
        <FlowPanel name="Status" style="&input; font-weight:bold;" />
        <Label text="=customer" class="bee-required" style="&labelRight; width:120px;" />
        <DataSelector source="Customer" style="&input; width:200px;" />
      </FlowPanel>
      <FlowPanel style="&section;">
        <Label text="=date" class="bee-required" style="&labelLeft;" />
        <InputDateTime source="Date" style="&input;" />
        <Label text="=personContact" style="&labelRight; width:120px;" />
        <DataSelector source="CustomerPerson" style="&input; width:200px;" 
          choiceColumns="FirstName LastName CompanyName" options="Customer" />
      </FlowPanel>
    
      <FlowPanel style="&section;">
        <Label text="=refNumber" style="&labelLeft;" />
        <InputText source="Number" style="&input;" />
        <Label text="=shipper" style="&labelRight; width:120px;" />
        <InputText source="Shipper" style="&input; width:200px;" />
      </FlowPanel>
    
      &separator;
      <xi:include href="widgets/CargoInfo.widget.xml" />

      &separator;
      <FlowPanel style="&section;">
        <Label text="=manager" class="bee-required" style="&labelLeft;" />
        <DataSelector name="Manager" source="Manager" style="&input; width:200px;"
          viewName="AssessmentExecutors" choiceColumns="LastName FirstName DepartmentName"
          editSource="CompanyPerson" newRowEnabled="false" />
        <CheckBox text="=trExpensesRegistered" name="ExpensesRegistered" source="ExpensesRegistered"
          style="&inline; margin-left:10px;" disablable="false" />
      </FlowPanel>
      <FlowPanel style="&section;">
        <Label text="=trComment" style="&labelLeft; vertical-align:top;" />
        <InputArea source="Notes" style="width:400px;" />
      </FlowPanel>

      <FlowPanel style="&section;">
        &separator;
        <Label text="=currency" class="bee-hasDefaults bee-required" style="&labelLeft;" />
        <DataSelector name="Currency" source="Currency" required="true"
          style="&inline; width:40px; margin-right:20px;" editEnabled="false" />
                  
        <FlowPanel style="&inline; &section;">
          <InlineLabel text="=customerPrice" style="padding-top:1px; margin-right:10px;" />
          <InlineLabel name="IncomeTotal" style="font-weight:bold; margin-right:20px;" />
          <InlineLabel text="=transportCost" style="padding-top:1px; margin-right:10px;" />
          <InlineLabel name="ExpenseTotal" style="font-weight:bold; margin-right:20px;" />
          <InlineLabel text="=profit" style="padding-top:1px; margin-right:10px;" />
          <InlineLabel name="Profit" style="font-weight:bold;" />
        </FlowPanel>
      </FlowPanel>
    </FlowPanel>

    &separator;
    <TabbedPages class="flexible" style="&section; min-height:100px;">
      <page>
        <text>=carriers</text>
        <ChildGrid name="AssessmentForwarders" relColumn="Assessment" />
      </page>
      <page>
        <FlowPanel>
          <Label text="=income" style="&inline;" />
          <FlowPanel name="Income" style="&inline;" />
        </FlowPanel>
        <ChildGrid name="CargoIncomes" relColumn="Cargo" source="Cargo" />
      </page>
      <page>
        <FlowPanel>
          <Label text="=trExpenses" style="&inline;" />
          <FlowPanel name="Expense" style="&inline;" />
        </FlowPanel>
        <ChildGrid name="CargoExpenses" relColumn="Cargo" source="Cargo" />
      </page>
      <page>
        <text>=assessments</text>
        <ChildGrid name="ChildAssessments" relColumn="Assessment" />
      </page>
    </TabbedPages>
  </FlowPanel>
</f:Form>
