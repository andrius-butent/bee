<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
    <!ENTITY summary "font-size: large; margin-left: 1em; margin-bottom: 5px; outline: none;">
    <!ENTITY table "border-collapse: collapse;">
    <!ENTITY colLabel "text-align: right; padding-left: 1em; padding-right: 1em; ">
    <!ENTITY cols '<col index="0" cellStyle="&colLabel;" /><col index="2" cellStyle="&colLabel;" /><col index="4" cellStyle="&colLabel;" />'>
    <!ENTITY cells "vertical-align: top; padding-bottom: 3px;">
    <!ENTITY separator "<hr/>">
    <!ENTITY area "width: 200px; height: 40px;">
    ]>
<f:Form xmlns="http://www.butent.com/widget"
        xmlns:f="http://www.butent.com/form"
        xmlns:xi="http://www.w3.org/2001/XInclude"

        name="ShipmentRequest" viewName="ShipmentRequests"
    >
  <FlowPanel>
    <Table kind="custom" style="&table; margin-top:10px;" cellStyle="&cells;">
      &cols;

      <row>
        <Label for="Date" />
        <DateTimeLabel source="Date" />
        <Label for="Status" />
        <TextLabel source="Status" style="font-weight:bold;" />
        <Label for="Locale" />
        <TextLabel source="Locale" style="font-weight:bold;" />
      </row>
      <row>
        <cell colSpan="3">
          <text />
        </cell>
        <cell colSpan="3">
          <TextLabel source="LossReason" style="color:red; white-space:pre-wrap;" />
        </cell>
      </row>
    </Table>
    &separator;

    <Details open="true">
      <Summary text="=trRequestCustomerInfo" style="&summary;" />

      <Table name="Register" kind="controls" style="&table;" cellStyle="&cells;">
        &cols;

        <row>
          <Label for="CustomerName" />
          <cell colSpan="2">
            <FlowPanel>
              <InputText source="CustomerName" style="width:20em; margin-right:5px;" />
              <DataSelector source="CustomerCompanyType" valueSource="Name" viewName="CompanyTypes"
                            style="width:5em; display:inline;" placeholder="=companyStatus" />
            </FlowPanel>
          </cell>
          <CheckBox source="CustomerRegister" />
        </row>

        <row>
          <Label for="CustomerCode" />
          <InputText source="CustomerCode" />
          <Label for="CustomerVatCode" />
          <InputText source="CustomerVATCode" />
        </row>

        <row>
          <Label for="CustomerContactPerson" />
          <InputText source="CustomerContactPerson" />
          <Label for="CustomerPersonPosition" />
          <DataSelector source="CustomerPersonPosition" valueSource="Name" viewName="Positions" />
        </row>

        <row>
          <Label for="CustomerPhone" />
          <InputText source="CustomerPhone" />
          <Label for="CustomerEmail" />
          <InputText source="CustomerEmail" />
        </row>

        <row>
          <Label for="CustomerFax" />
          <InputText source="CustomerFax" />
        </row>

        <row>
          <Label for="CustomerAddress" />
          <InputText source="CustomerAddress" />
          <Label for="CustomerPostIndex" />
          <InputText source="CustomerPostIndex" />
        </row>

        <row>
          <Label for="CustomerCity" />
          <DataSelector source="CustomerCity" valueSource="Name" viewName="Cities"
                        choiceColumns="Name CountryName" />
          <Label for="CustomerCountry" />
          <DataSelector source="CustomerCountry" valueSource="Name" viewName="Countries" />
        </row>

        <row>
          <Label for="CustomerNotes" />
          <cell colSpan="3">
            <InputArea source="CustomerNotes" style="&area; width:100%;" />
          </cell>
        </row>
      </Table>

      <Table name="CompanyPerson" kind="controls" style="&table;" cellStyle="&cells;">
        &cols;

        <row>
          <Label for="CompanyPerson" class="bee-required" />
          <DataSelector source="CompanyPerson" newRowEnabled="false" required="true"
                        renderColumns="PersonFirstName PersonLastName" />
          <Label for="CompanyName" />
          <TextLabel source="CompanyName" />
        </row>

        <row>
          <Label for="PersonPhone" />
          <TextLabel source="PersonPhone" />
          <Label for="PersonEmail" />
          <TextLabel source="PersonEmail" />
        </row>
      </Table>
    </Details>
    &separator;

    <Details open="true">
      <Summary text="=cargoInformation" style="&summary;" />

      <xi:include href="widgets/CargoPlaces.widget.xml" />

      <ChildGrid name="CargoHandling" relColumn="Cargo" source="Cargo"
                 caption="=trAdditionalHandlingPlaces" style="margin-top:10px; height:200px;" />
    </Details>
    &separator;

    <Details open="true">
      <Summary text="=trRequestShipmentInfo" style="&summary;" />

      <Table kind="controls" style="&table;" cellStyle="&cells;">
        &cols;

        <row>
          <Label for="Expedition" />
          <DataSelector source="Expedition" filter="SelfService" renderColumns="ExpeditionType"
                        order="SelfService, Name" newRowEnabled="false" />
          <CheckBox source="Logistics" readOnly="true" />
          <CheckBox source="CustomsBrokerage" />
        </row>

        <row>
          <Label for="ShippingTerm" class="bee-required" />
          <DataSelector source="ShippingTerm" required="true" filter="SelfService"
                        order="SelfService, Name" newRowEnabled="false" />
          <text />
          <CheckBox source="FreightInsurance" />
        </row>

        <row>
          <text />
          <text />
          <Label for="Value" />
          <FlowPanel>
            <InputMoney source="Value" style="margin-right:5px; width:7em;" />
            <DataSelector source="ValueCurrency" newRowEnabled="false" editEnabled="false"
                          placeholder="=currencyShort" style="width:4em; display:inline;" />
          </FlowPanel>
        </row>
      </Table>
    </Details>
    &separator;

    <Details open="true">
      <Summary text="=trRequestCargoInfo" style="&summary;" />

      <Table kind="controls" style="&table;" cellStyle="&cells;">
        &cols;

        <row>
          <Label for="Description" />
          <InputArea source="Description" style="width: 100%; height: 40px;" />
          <Label for="Quantity" />
          <InputDecimal source="Quantity" />
        </row>

        <row>
          <Label for="Weight" />
          <InputDecimal source="Weight" />
          <Label for="Volume" />
          <InputDecimal source="Volume" />
        </row>

        <row>
          <text />
          <CheckBox source="Dangerous" />
        </row>

        <row>
          <text />
          <CheckBox source="Outsized" />
        </row>

        <row>
          <text />
          <CheckBox source="Partial" />
        </row>

        <row>
          <Label for="LDM" />
          <InputDecimal source="LDM" />
          <Label for="Length" />
          <InputDecimal source="Length" />
        </row>

        <row>
          <Label for="Width" />
          <InputDecimal source="Width" />
          <Label for="Height" />
          <InputDecimal source="Height" />
        </row>
      </Table>
    </Details>
    &separator;

    <Details open="true">
      <Summary text="=trRequestAdditionalInfo" style="&summary;" />

      <Table kind="controls" style="&table;" cellStyle="&cells;">
        &cols;

        <row>
          <Label for="Manager" />
          <DataSelector source="Manager" newRowEnabled="false" editSource="ManagerPerson"
                        style="width:15em;" />
          <Label text="=trRequestNotes" />
          <InputArea source="Notes" style="&area;" />
        </row>

        <row>
          <Label for="Host" />
          <TextLabel source="Host" />
          <Label for="Agent" />
          <TextLabel source="Agent" />
        </row>
      </Table>
    </Details>
    &separator;

    <TabbedPages style="height:300px;">
      <page>
        <text>=files</text>
        <ChildGrid name="ShipmentRequestFiles" relColumn="ShipmentRequest" />
      </page>
      <page>
        <text>=mails</text>
        <ChildGrid name="RelatedMessages" relColumn="ShipmentRequest" paging="true" />
      </page>
    </TabbedPages>
  </FlowPanel>
</f:Form>
