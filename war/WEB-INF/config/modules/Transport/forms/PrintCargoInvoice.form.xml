<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY section "margin-top: 15px;">
  <!ENTITY bold "font-weight:bold;">
  <!ENTITY form "PrintCargoInvoice">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:ui="http://www.butent.com/ui"

  name="&form;" caption="=trdInvoice" disabledActions="save"
  width="70" widthUnit="%" height="90" heightUnit="%"
  >
  <FlowPanel class="bee-PrintableForm" style="padding: 10px; background-color: white;">
    <HorizontalPanel>
      <Image  url="images/logo.png" />
      <cell width="100" widthUnit="%">
        <FlowPanel style="text-align:center; font-size:medium;">
          <TextLabel style="&bold;">
            <render>
              <ui:expression>row.Proforma ? 'Sąskaita išankstiniam apmokėjimui' : 'PVM Sąskaita-faktūra'</ui:expression>
            </render>
          </TextLabel>
          <TextLabel source="InvoiceNo">
            <renderToken source="InvoicePrefix" prefix="Serija " suffix=" " />
            <renderToken source="InvoiceNo" prefix="Nr. " />
          </TextLabel>
        </FlowPanel>
      </cell>
    </HorizontalPanel>

    <FlowPanel style="&section;">
      <Table kind="output" style="width:100%;">
        <row>
          <cell rowSpan="2" style="vertical-align:top;">
            <Label html="Siuntėjas:" />
          </cell>
          <cell rowSpan="2" style="vertical-align:top; width:50%;">
            <FlowPanel name="Supplier" />
          </cell>
          <cell style="vertical-align:top;">
            <Label html="Gavėjas:" horizontalAlignment="right" />
          </cell>
          <cell style="vertical-align:top; width:50%;">
            <FlowPanel name="Customer" />
          </cell>
        </row>
        <row>
          <cell style="vertical-align:top;">
            <TextLabel horizontalAlignment="right">
              <render>
                <ui:expression>row.Payer ? "Mokėtojas:" : null</ui:expression>
              </render>
            </TextLabel>
          </cell>
          <cell style="vertical-align:top;">
            <FlowPanel name="Payer" />
          </cell>
        </row>
      </Table>
    </FlowPanel>

    <DateTimeLabel source="Date" format="DATE_LONG" horizontalAlignment="right" />

    <Table name="InvoiceDetails" kind="output" style="&section; width:100%">
      <properties rateCurrency="EUR" />
      <row>
        <cell rowSpan="2">
          <Label text="Paslauga">
            <properties name="Name" />
          </Label>
        </cell>
        <cell rowSpan="2">
          <Label text="Užsakymo Nr.">
            <properties name="OrderNo" />
          </Label>
        </cell>
        <cell rowSpan="2">
          <Label text="CMR Nr.">
            <properties name="CmrNumber" />
          </Label>
        </cell>
        <Label text="Pakrovimas">
          <properties name="LoadingDate" />
        </Label>
        <cell rowSpan="2">
          <Label text="Maršrutas">
            <properties name="Notes" />
          </Label>
        </cell>
        <Label text="Vairuotojas">
          <properties name="Driver" />
        </Label>
        <cell rowSpan="2">
          <Label text="=trdAmountWoVat">
            <properties name="Amount" />
          </Label>
        </cell>
        <cell rowSpan="2">
          <Label text="=currencyRate">
            <properties name="Rate" />
          </Label>
        </cell>
        <cell rowSpan="2">
          <Label text="=trdAmountByRate">
            <properties name="RateAmount" />
          </Label>
        </cell>
        <cell rowSpan="2">
          <Label text="=trdVat" horizontalAlignment="right">
            <properties name="Vat" />
          </Label>
        </cell>
      </row>
      <row>
        <Label text="Iškrovimas">
          <properties name="UnloadingDate" />
        </Label>
        <Label text="Transporto valst.Nr.">
          <properties name="Vehicle" />
        </Label>
      </row>
      <row>
        <cell colSpan="6">
          <FlowPanel style="text-align:right;">
            <Label text="Bendra suma:" />
            <Label text="PVM suma:" />
            <Label text="VISO:" style="&bold;" />
          </FlowPanel>
        </cell>
        <FlowPanel>
          <Label>
            <properties name="AmountTotal" />
          </Label>
          <Label>
            <properties name="VatTotal" />
          </Label>
          <Label style="&bold;">
            <properties name="Total" />
          </Label>
         </FlowPanel>
        <FlowPanel>
          <Label>
            <properties name="Currency" />
          </Label>
          <Label>
            <properties name="Currency" />
          </Label>
          <Label style="&bold;">
            <properties name="Currency" />
          </Label>
        </FlowPanel>
        <FlowPanel>
          <Label>
            <properties name="RateAmountTotal" />
          </Label>
          <Label>
            <properties name="RateVatTotal" />
          </Label>
          <Label>
            <properties name="RateTotal" />
          </Label>
        </FlowPanel>
        <FlowPanel>
          <Label>
            <properties name="RateCurrency" />
          </Label>
          <Label>
            <properties name="RateCurrency" />
          </Label>
          <Label>
            <properties name="RateCurrency" />
          </Label>
        </FlowPanel>
      </row>
    </Table>

    <HorizontalPanel style="&section;">
      <Label html="Suma žodžiais:" />
      <Label name="TotalInWords" />
    </HorizontalPanel>

    <TextLabel source="Term" style="&section; &bold;">
      <dynStyle>
        <ui:inline>display:none;</ui:inline>
        <ui:expression>row.Proforma</ui:expression>
      </dynStyle>
      <renderToken source="Term" prefix="Sąskaitą apmokėti iki: " />
    </TextLabel>

    <Label style="&section; font-size:smaller; &bold;"
           html="Pastaba:
            &lt;br>Šios nuorodos negalioja sąskaitoms su 21 % PVM
            &lt;br>0 % PVM tarifas: pagal PVM 1 sr. 45 str.
            &lt;br>Be PVM: Pagal PVM įst. 13 (1) str.">
      <dynStyle>
        <ui:inline>display:none;</ui:inline>
        <ui:expression>row.Proforma</ui:expression>
      </dynStyle>
    </Label>

    <Label style="&section; font-size:smaller;"
           text="Pagal LR CK 6.210 (1) straipsnį: „Terminą įvykdyti piniginę prievolę praleidęs skolininkas privalo mokėti 0,02 procentų dydžio delspinigius per dieną už sumą, kurią sumokėti praleistas terminas, jeigu įstatymai ar sutartis nenustato kitokio delspinigių dydžio“.">
      <dynStyle>
        <ui:inline>display:none;</ui:inline>
        <ui:expression>row.Proforma</ui:expression>
      </dynStyle>
    </Label>

    <TextLabel source="Notes" style="&section; white-space:pre-wrap;">
      <renderToken source="Notes" prefix="=notes+: " />
    </TextLabel>

    <Table kind="output" style="width:100%; margin-top:10px;">
      <row style="&bold;">
        <Label html="Išdavė" />
        <Label html="Priėmė" />
      </row>
      <row style="font-size:xx-small;">
        <Label html="(vardas, pavardė, pareigos ir parašas)" />
        <Label html="(vardas, pavardė, pareigos ir parašas)" />
      </row>
      <row>
        <TextLabel source="Manager" style="margin-top:5px;">
          <renderToken source="ManagerFirstName" />
          <renderToken source="ManagerLastName" />
        </TextLabel>
      </row>
    </Table>
  </FlowPanel>
</f:Form>
