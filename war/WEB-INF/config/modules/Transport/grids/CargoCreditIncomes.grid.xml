<?xml version="1.0" encoding="UTF-8"?>
<Grid xmlns="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui"

  name="CargoCreditIncomes" viewName="CargoCreditIncomes"
  flexGrow="1"
  readOnly="true" caption="=trCreditIncomes"
  >
  <columns>
    <SelectionColumn name="Select" caption="-" width="20" />
    <DataColumn name="OrderDate" caption="=orderDate" />
    <RelColumn name="OrderNo" editEnabled="true" editSource="Order" />

    <RelColumn name="Sale" editEnabled="true" renderColumns="Sale"
      editForm="CargoInvoice" editViewName="CargoInvoices" />
    <DataColumn name="InvoiceDate" />
    <DataColumn name="InvoiceNo" searchBy="InvoicePrefix InvoiceNumber">
      <render>
        <ui:function>
          if (!row.InvoicePrefix) {
            return row.InvoiceNo;
          } else if(!row.InvoiceNo) {
            return row.InvoicePrefix;
          } else {
            return row.InvoicePrefix + " " + row.InvoiceNo;
          }
        </ui:function>
      </render>
    </DataColumn>
    <DataColumn name="CustomerName" caption="=trdCustomer" />
    <DataColumn name="PayerName" caption="=trdPayer" />

    <CalcColumn type="string" name="From" source="LoadingCountryCode" cellType="html" width="20"
      caption="=from" horizontalAlignment="center">
      <renderer type="flag" />
    </CalcColumn>
    <CalcColumn type="string" name="To" source="UnloadingCountryCode" cellType="html" width="20"
      caption="=to" horizontalAlignment="center">
      <renderer type="flag" />
    </CalcColumn>

    <DataColumn name="ServiceName" />
    <DataColumn name="Amount">
      <style>
        <headerStyle><ui:font>bold</ui:font></headerStyle>
        <bodyStyle><ui:font>bold</ui:font></bodyStyle>
      </style>
    </DataColumn>
    <DataColumn name="CurrencyName" flexGrow="0" />
    <DataColumn name="Vat" horizontalAlignment="right">
      <render><ui:expression>row.Vat ? (row.Vat + (row.VatPercent ? '%' : '')) : ''</ui:expression></render>
    </DataColumn>
    <DataColumn name="Note" />
  </columns>
</Grid>
