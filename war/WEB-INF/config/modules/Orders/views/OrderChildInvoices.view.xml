<?xml version="1.0" encoding="UTF-8"?>
<View xmlns="http://www.butent.com/view" xmlns:x="http://www.butent.com/expression"
  name="OrderChildInvoices" source="OrderChildInvoices" caption="=trInvoices">

  <Columns>
    <SimpleColumn name="Order" />
    <SimpleJoin name="Order" joinType="LEFT">
      <SimpleColumn name="Series" />
      <SimpleJoin joinType="LEFT" name="Series">
        <SimpleColumn name="SeriesName" />
      </SimpleJoin>

      <SimpleColumn name="Number" />
    </SimpleJoin>

    <SimpleColumn name="Sale" />
    <SimpleJoin joinType="LEFT" name="Sale">
      <SimpleColumn name="Date" />

      <SimpleColumn name="Operation" />
      <SimpleJoin name="Operation" joinType="LEFT">
        <SimpleColumn name="OperationName" />
      </SimpleJoin>

      <SimpleColumn name="WarehouseFrom" />
      <SimpleJoin joinType="LEFT" name="WarehouseFrom">
        <SimpleColumn alias="WarehouseFromCode" name="Code" />
      </SimpleJoin>

      <SimpleColumn name="SaleSeries" />
      <SimpleJoin name="SaleSeries" joinType="LEFT">
        <SimpleColumn name="SeriesName" alias="InvoicePrefix" />
      </SimpleJoin>
      <SimpleColumn name="InvoiceNo" />
      <SimpleColumn name="Term" />

      <SimpleColumn name="Vehicle" />
      <SimpleColumn name="Driver" />
      <SimpleColumn name="Notes" />
      <SimpleColumn name="Exported" />
      <SimpleColumn name="Proforma" />

      <SimpleColumn name="Amount" />
      <SimpleColumn name="Currency" />
      <SimpleJoin joinType="LEFT" name="Currency">
        <SimpleColumn name="Name" alias="CurrencyName" />
        <SimpleColumn name="MinorName" />
      </SimpleJoin>

      <SimpleColumn name="PaymentTime" />
      <SimpleColumn name="Paid" />

      <SimpleColumn name="Debt">
        <x:minus>
          <x:number>"Amount"</x:number>
          <x:nvl type="DECIMAL">
            <x:number>"Paid"</x:number>
            <x:number>0</x:number>
          </x:nvl>
        </x:minus>
      </SimpleColumn>

      <SimpleColumn name="Supplier" />
      <SimpleJoin joinType="LEFT" name="Supplier">
        <SimpleColumn name="Name" alias="SupplierName"
          label="=trdSupplier" />
      </SimpleJoin>

      <SimpleColumn name="Customer" />
      <SimpleJoin joinType="LEFT" name="Customer">
        <SimpleColumn name="Name" alias="CustomerName"
          label="=trdCustomer" />
      </SimpleJoin>

      <SimpleColumn name="Payer" />
      <SimpleJoin joinType="LEFT" name="Payer">
        <SimpleColumn name="Name" alias="PayerName" label="=trdPayer" />
      </SimpleJoin>
    </SimpleJoin>

    <SimpleColumn name="Loading" />
    <SimpleColumn name="Unloading" />
    <SimpleColumn name="Issued" />
    <SimpleColumn name="DriverInfo" />
  </Columns>
</View>
