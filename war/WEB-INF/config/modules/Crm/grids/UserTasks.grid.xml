<?xml version="1.0" encoding="UTF-8"?>
<Grid xmlns="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui"
  xmlns:w="http://www.butent.com/widget"
  
  name="UserTasks" viewName="UserTasks" caption="Užduotys"
  editForm="Task" editShowId="true" editSave="false" newRowForm="NewTask" newRowPopup="true"
  caching="false"
  >
  <north size="40">
    <w:FlowPanel class="flexBox-horizontal-center" style="background-color: #f8f8f8; font-family: Tahoma; font-size: 12px;">
      <w:FlowPanel>
        <w:CheckBox name="Scheduled" html="Suplanuotos" />
        <w:CheckBox name="Executing" html="Vykdomos" checked="true" />
        <w:CheckBox name="Suspended" html="Sustabdytos" checked="true" />
        <w:CheckBox name="Completed" html="Įvykdytos" />
        <w:CheckBox name="Canceled" html="Nutrauktos" />
        <w:CheckBox name="Approved" html="Baigtos" />
      </w:FlowPanel>
      <w:FlowPanel class="flexBox-vertical">
        <w:SimplePanel>
          <w:CheckBox name="Overdue" html="Tik vėluojančios" style="color: red;" />
        </w:SimplePanel>
        <w:SimplePanel>
          <w:CheckBox name="Updated" html="Tik pasikeitusios" />
        </w:SimplePanel>
      </w:FlowPanel>
      <w:Button name="Filter" html="Filtruoti" />
    </w:FlowPanel>
  </north>
  
  <header borderWidth="1 0" />
  <body height="20" borderWidth="0">
    <style>
      <ui:font>Verdana 12 px</ui:font>
    </style>
  </body>
  <footer borderWidth="0" />

  <columns>
    <CalcColumn name="Mode" type="string" caption="&#160;" cell="html"
      horizontalAlignment="center" width="15" options="greenSmall, yellowSmall" />
    <IdColumn name="Id" caption="ID" />
    <DataColumn name="Priority" source="Priority" caption="Prioritetas" itemKey="Priority" />
    <DataColumn name="Description" source="Description" caption="Užduotis" />
    <DataColumn name="Project" source="ProjectName" caption="Projektas" />
    <DataColumn name="CompanyName" source="CompanyName" caption="Įmonė" />
    <DataColumn name="Event" source="Event" caption="Būsena" itemKey="TaskEvent" />
    <CalcColumn name="Owner" type="string" caption="Vadovas" sortBy="OwnerFirstName, OwnerLastName"
      searchBy="OwnerFirstName, OwnerLastName">
      <render>
        <ui:function>return (row.OwnerFirstName || "") + " " + (row.OwnerLastName || "")</ui:function>
      </render>
    </CalcColumn>
    <CalcColumn name="Executor" type="string" caption="Vykdytojas"
      sortBy="ExecutorFirstName, ExecutorLastName" searchBy="ExecutorFirstName, ExecutorLastName">
      <render>
        <ui:function>return (row.ExecutorFirstName || "") + " " + (row.ExecutorLastName || "")</ui:function>
      </render>
    </CalcColumn>
    <DataColumn name="StartTime" source="StartTime" caption="Pradžia" />
    <DataColumn name="FinishTime" source="FinishTime" caption="Terminas" />
  </columns>

  <rowStyle>
    <ui:style>
      <ui:inline>color: red;</ui:inline>
    </ui:style>
    <ui:condition>
      <ui:expression>row.Event == 0 &amp;&amp; row.FinishTime &lt; new Date()</ui:expression>
    </ui:condition>
  </rowStyle>
  <rowStyle>
    <ui:style>
      <ui:inline>color: black;</ui:inline>
    </ui:style>
    <ui:condition>
      <ui:expression>row.Event == 0</ui:expression>
    </ui:condition>
  </rowStyle>
  <rowStyle>
    <ui:style>
      <ui:inline>color: gray;</ui:inline>
    </ui:style>
    <ui:condition>
      <ui:expression>true</ui:expression>
    </ui:condition>
  </rowStyle>
</Grid>
