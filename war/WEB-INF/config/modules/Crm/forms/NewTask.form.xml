<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY inline "display: inline-block;">

  <!ENTITY separator "<hr/>">

  <!ENTITY tbl "border-collapse: collapse;">
  <!ENTITY cell "vertical-align: top; padding-bottom: 2px;">
  <!ENTITY col1 "text-align: right; padding-right: 8px; width: 128px;">
  <!ENTITY col3 "text-align: right; padding-left: 8px; padding-right: 8px; width: 128px;">

  <!ENTITY inp2 "width: 150px;">
  <!ENTITY inp2x "width: 500px;">
  <!ENTITY inp2y "width: 400px;">

  <!ENTITY dateStyle "&inline; min-width: 90px; max-width: 90px;">
  <!ENTITY timeStyle "&inline; min-width: 50px; max-width: 50px; width: 50px; margin-left: 10px;">
  <!ENTITY timeStep "30">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  
  name="NewTask" caption="=crmNewTask" width="700" height="600">

  <FlowPanel style="padding: 10px 2px 2px 10px;">
  
    <Table style="&tbl;" cellStyle="&cell;">
      <col index="0" cellStyle="&col1;" />
      <col index="2" cellStyle="&col3;" />

      <row>
        <Label text="=taskTemplate" />
        <DataSelector viewName="TaskTemplates" choiceColumns="Name" property="Template"
          newRowEnabled="false" style="&inp2;" />
        <Label text="=priority" />
        <Radio source="Priority" />
      </row>

      <row>
        <Label text="=startingDate" />
        <FlowPanel>
          <InputDate name="Start_Date" style="&dateStyle;" />
          <InputTimeOfDay name="Start_Time" step="&timeStep;" style="&timeStyle;" />
        </FlowPanel>
        <Label text="=crmTaskExpectedDuration" />
        <InputTime source="ExpectedDuration" step="&timeStep;" style="width: 50px;" />
      </row>

      <row>
        <Label text="=endingDate" />
        <FlowPanel>
          <InputDate name="End_Date" style="&dateStyle;" />
          <InputTimeOfDay name="End_Time" step="&timeStep;" style="&timeStyle;" />
        </FlowPanel>
        <Label text="=company" />
        <DataSelector source="Company" editPopup="true" style="width: 200px;" />
      </row>

      <row>
        <Label text="=taskReminder" />
        <DataSelector source="Reminder" renderColumns="ReminderName" newRowEnabled="false"
          style="&inp2;" />
        <Label text="=personContact" />
        <DataSelector source="Contact" editPopup="true" style="width: 200px;"
          renderColumns="ContactFirstName ContactLastName"
          choiceColumns="FirstName LastName CompanyName" options="Company" />
      </row>

      <row>
        <Label text="=crmReminderDate" />
        <FlowPanel>
          <InputDate name="Reminder_Date" style="&dateStyle;" />
          <InputTimeOfDay name="Reminder_Time" step="&timeStep;" style="&timeStyle;" />
        </FlowPanel>
      </row>
    </Table>

    &separator;
    <Table style="&tbl;" cellStyle="&cell;">
      <col index="0" cellStyle="&col1;" />
      
      <row>
        <Label text="=taskTheme" class="bee-required" />
        <InputText source="Summary" style="&inp2x;" autocomplete="true" />
      </row>

      <row>
        <Label text="=description" />
        <InputArea source="Description" style="&inp2x; height: 60px;" />
      </row>
    </Table>

    &separator;
    <FlowPanel style="margin-top: 4px;" class="flexBox-horizontal-top">
      <Label text="=documentFiles" style="width: 128px;" />
      <FileCollector name="Files" editableColumns="name">
        <face resource="attachment" />
      </FileCollector>
    </FlowPanel>

    &separator;
    <Table style="&tbl;" cellStyle="&cell;">
      <col index="0" cellStyle="&col1;" />

      <row>
        <Label text="=crmTaskExecutors" class="bee-required" />
        <MultiSelector viewName="Users" property="Executors" renderColumns="FirstName LastName"
          editPopup="true" editSource="CompanyPerson" style="&inp2x;"
          label="=crmTaskExecutors" required="true" />
      </row>

      <row>
        <Label text="=crmTaskExecutorGroups" />
        <MultiSelector viewName="UserGroupSettings" property="ExecutorGroups" renderColumns="Name"
          editPopup="true" style="&inp2y;" label="=crmTaskExecutorGroups" />
      </row>

      <row>
        <Label text="=crmTaskObservers" />
        <MultiSelector viewName="Users" property="Observers" renderColumns="FirstName LastName"
          editPopup="true" editSource="CompanyPerson" style="&inp2x;" label="=crmTaskObservers" />
      </row>

      <row>
        <Label text="=crmTaskObserverGroups" />
        <MultiSelector viewName="UserGroupSettings" property="ObserverGroups" renderColumns="Name"
          editPopup="true" style="&inp2y;" label="=crmTaskObserverGroups" />
      </row>
    </Table>

    &separator;
    <Label text="=relatedTo" style="font-style: italic; margin-bottom: 2px;" />

    <Table style="&tbl;" cellStyle="&cell;">
      <col index="0" cellStyle="&col1;" />
  
      <row>
        <Label text="=companies" />
        <MultiSelector viewName="Companies" property="Companies" renderColumns="Name"
          editPopup="true" style="&inp2x;" />
      </row>

      <row>
        <Label text="=persons" />
        <MultiSelector viewName="Persons" property="Persons" renderColumns="FirstName LastName"
          editPopup="true" style="&inp2x;" />
      </row>

      <row>
        <Label text="=appointments" />
        <MultiSelector viewName="Appointments" property="Appointments"
          renderColumns="Summary" choiceColumns="Summary StartDateTime EndDateTime"
          newRowEnabled="false" editPopup="true" style="&inp2x;" />
      </row>

      <row>
        <Label text="=discussions" />
        <MultiSelector viewName="Discussions" property="Discussions"
          renderColumns="Subject" newRowEnabled="false" editPopup="true" style="&inp2x;" />
      </row>

      <row>
        <Label text="=tasks" />
        <MultiSelector viewName="Tasks" property="Tasks" 
          renderColumns="Summary ExecutorFirstName ExecutorLastName"
          choiceColumns="Summary ExecutorFirstName ExecutorLastName StartTime FinishTime"
          newRowEnabled="false" editPopup="true" style="&inp2x;" />
        </row>
    </Table>

  </FlowPanel>
</f:Form>  
