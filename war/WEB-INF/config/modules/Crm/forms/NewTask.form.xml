<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY inline "display: inline-block;">

  <!ENTITY section "margin-top: 4px;">
  <!ENTITY header "font-style: italic;">
  <!ENTITY separator "<hr/>">

  <!ENTITY lbl1 "&inline; max-width: 128px; min-width: 110px; text-align: right; padding-right: 8px; min-height: 20px; max-height: 20px; padding-top: 1px;">
  <!ENTITY top1 "text-align: right; padding-right: 8px; max-width: 128px; padding-top: 1px;">
  <!ENTITY inp2 "&inline; max-width: 150px; min-width: 150px;">
  <!ENTITY inp2x "&inline; width: 540px;">
  <!ENTITY lbl3 "&inline; width: 128px; padding-top: 1px; margin-left: 20px;">

  <!ENTITY inp4 "&inline;">

  <!ENTITY dateStyle "&inline; min-width: 90px; max-width: 90px;">
  <!ENTITY timeStyle "&inline; min-width: 50px; max-width: 50px; width: 50px; margin-left: 10px;">
  <!ENTITY timeStep "30">
]>
<f:Form xmlns="http://www.butent.com/widget"
  xmlns:f="http://www.butent.com/form"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  
  name="NewTask" caption="=crmNewTask" width="650" height="520">

  <FlowPanel style="padding: 10px 2px 2px 10px;">

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=taskTemplate" style="&top1;" />
      <DataSelector viewName="TaskTemplates" choiceColumns="Name" property="Template"
        newRowEnabled="false" style="&inp2;" />
      <Label text="=priority" style="&inline; width: 128px; text-align:right; padding-right:8px; padding-top: 1px; " />
      <Radio source="Priority" style="&inp4; min-width:200px;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=startingDate" style="&lbl1;" />
      <InputDate name="Start_Date" style="&dateStyle;" />
      <InputTimeOfDay name="Start_Time" step="&timeStep;" style="&timeStyle;" />
      <Label text="=crmTaskExpectedDuration" style="&lbl3;" />
      <InputTime source="ExpectedDuration" step="&timeStep;" style="&inp4; min-width: 50px;max-width: 50px;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=endingDate" style="&lbl1;" />
      <InputDate name="End_Date" style="&dateStyle;" />
      <InputTimeOfDay name="End_Time" step="&timeStep;" style="&timeStyle;" />
      <Label text="=company" style="&inline; width: 107px; text-align:right; padding-right:21px; padding-top: 1px; margin-left: 20px;" />
      <DataSelector source="Company" editPopup="true" style="&inp4; width: 202px;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=taskReminder" style="&lbl1;" />
      <DataSelector source="Reminder" renderColumns="ReminderName" newRowEnabled="false"
        style="&inp2;" />
      <Label text="=personContact" style="&lbl3;" />
      <DataSelector source="Contact" style="&inp4; width: 202px;" editPopup="true"
        renderColumns="ContactFirstName ContactLastName"
        choiceColumns="FirstName LastName CompanyName" options="Company" />
    </FlowPanel>

    &separator;
    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=taskTheme" class="bee-required" style="&lbl1;min-width:70px;" />
      <InputText source="Summary" style="&inp2x;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=description" style="&top1; padding-right:12px;" />
      <InputArea source="Description" style="width: 540px; height: 60px;" />
    </FlowPanel>

    &separator;
    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=documentFiles" style="&top1; min-width:60px;" />
      <FileCollector name="Files" editableColumns="name">
        <face resource="attachment" />
      </FileCollector>
    </FlowPanel>

    &separator;
    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=crmTaskExecutors" class="bee-required" style="&top1; padding-right:12px;" />
      <MultiSelector viewName="Users" property="Executors" renderColumns="FirstName LastName"
        editPopup="true" editSource="CompanyPerson" style="&inp2x;"
        label="=crmTaskExecutors" required="true" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=crmTaskObservers" style="&top1; min-width:60px; padding-right:18px;" />
      <MultiSelector viewName="Users" property="Observers" renderColumns="FirstName LastName"
        editPopup="true" editSource="CompanyPerson" style="&inp2x;" label="=crmTaskObservers" />
    </FlowPanel>

    &separator;
    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=relatedTo" style="&header;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=companies" style="&top1;min-width:60px; padding-right:18px;" />
      <MultiSelector viewName="Companies" property="Companies" renderColumns="Name"
        editPopup="true" style="&inp2x;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=persons" style="&top1;min-width:60px; padding-right:18px;" />
      <MultiSelector viewName="Persons" property="Persons" renderColumns="FirstName LastName"
        editPopup="true" style="&inp2x;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=appointments" style="&top1;min-width:60px; padding-right:18px;" />
      <MultiSelector viewName="Appointments" property="Appointments"
        renderColumns="Summary" choiceColumns="Summary StartDateTime EndDateTime"
        newRowEnabled="false" editPopup="true" style="&inp2x;" />
    </FlowPanel>

    <FlowPanel style="&section;" class="flexBox-horizontal">
      <Label text="=tasks" style="&top1;min-width:60px; padding-right:18px;" />
      <MultiSelector viewName="Tasks" property="Tasks" 
        renderColumns="Summary ExecutorFirstName ExecutorLastName"
        choiceColumns="Summary ExecutorFirstName ExecutorLastName StartTime FinishTime"
        newRowEnabled="false" editPopup="true" style="&inp2x;" />
    </FlowPanel>

  </FlowPanel>
</f:Form>  
