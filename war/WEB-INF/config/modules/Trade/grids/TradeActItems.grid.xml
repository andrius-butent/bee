<?xml version="1.0" encoding="UTF-8"?>
<g:Grid xmlns="http://www.butent.com/column" xmlns:g="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui"
  xmlns:xi="http://www.w3.org/2001/XInclude"

  name="TradeActItems" viewName="TradeActItems"
  flexGrow="1"
  newRowCaption="=newItem"
  >
  <xi:include href="columns/TradeActItem.columns.xml" />

  <xi:include href="columns/TradeActQuantity.columns.xml" />

  <g:columns>
    <PropColumn name="returned_qty" type="double" label="=taQuantityReturned" visible="true">
      <style>
        <bodyStyle><ui:inline>color: red;</ui:inline></bodyStyle>
        <footerStyle><ui:inline>color: red;</ui:inline></footerStyle>
      </style>
      <footer aggregate="sum" />
    </PropColumn>
    
    <CalcColumn name="remaining_qty" type="double" label="=taQuantityRemained">
      <render>
        <ui:expression>row.Quantity - Number(row.returned_qty)</ui:expression>
      </render>
      <footer aggregate="sum" />
    </CalcColumn>
  </g:columns>

  <xi:include href="columns/TradeActWeight.columns.xml" />
  <xi:include href="columns/TradeActPrice.columns.xml" />

  <xi:include href="columns/TradeActDiscount.columns.xml" />
  <xi:include href="columns/TradeActVat.columns.xml" />
  <xi:include href="columns/TradeActTotal.columns.xml" />

  <g:columns>
    <DataColumn name="Note" visible="false" />
  </g:columns>
</g:Grid>
