<?xml version="1.0" encoding="UTF-8"?>
<g:Grid xmlns="http://www.butent.com/column" xmlns:g="http://www.butent.com/grid"
  xmlns:ui="http://www.butent.com/ui" xmlns:w="http://www.butent.com/widget"

  name="Discussions" viewName="Discussions" caption="=discussions"
  cacheData="false" asyncThreshold="-1" favorite="Subject" flexGrow="1" order="DiscussionID desc">
  <g:columns>
    <CalcColumn name="Mode" type="string" cellType="html"
      horizontalAlignment="center" width="20" maxWidth="20" caption="-"
      label="=discussColumnMode" />

    <PropColumn name="Star" type="integer" cellType="html"
      horizontalAlignment="center" width="20" maxWidth="20"
      label="=discussColumnStar">
      <renderer type="star" />
    </PropColumn>

    <DataColumn name="Subject" minWidth="300"  visible="true" />

    <RelColumn name="Owner" renderColumns="OwnerFirstName OwnerLastName"
      sortBy="OwnerLastName OwnerFirstName" autoFit="true" />

    <DataColumn name="Status" visible="true" minWidth="70"
      autoFit="true" />

    <DataColumn name="Created" visible="true" minWidth="120"
      autoFit="true" />

    <!-- <PropColumn name="Attachment" type="string" cellType="html" horizontalAlignment="center" 
      width="20" maxWidth="20"> <renderer type="attachment" /> </PropColumn> -->

    <CalcColumn name="FilesCount" type="string" cellType="html"  visible="true" maxWidth="90"
      horizontalAlignment="center" autoFit="true" caption="-" sortable="false">
       <render>
        <ui:function>
          if (row.FilesCount > 0) {
          return $wnd.Bee_getImageResourceHtml("attachment") + row.FilesCount;
          } else {
          return " "
          }
        </ui:function>
      </render>     
     <!--  <renderer type="attachment" /> -->
    </CalcColumn>

    <CalcColumn name="LastComment" type="string" cellType="html"
      minWidth="150" autoFit="true" caption="=discussLastComment">
      <renderToken source="LastComment" format="date_time_short" />
    </CalcColumn>
    
    <CalcColumn name="CommentCount" type="integer"
      maxWidth="90" autoFit="true" caption="=discussTotalComments">
        <render>
          <ui:expression>row.CommentCount</ui:expression>
        </render>
    </CalcColumn>
      

  </g:columns>
  <g:rowStyle>
    <ui:inline>="background-color:#ccc"</ui:inline>
    <ui:expression>row.Status == 1</ui:expression>
  </g:rowStyle>
</g:Grid>
