<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Form [
  <!ENTITY row "margin:5px 5px 0 5px;">
  <!ENTITY chlabel "text-align:right; width:100px; padding-top:2px; margin-right:5px;">
]>
<f:Form xmlns="http://www.butent.com/widget" xmlns:f="http://www.butent.com/form"
  xmlns:xi="http://www.w3.org/2001/XInclude" name="Document" caption="=document"
  width="900" height="500">

  <TabbedPages resizable="false">
    <page>
      <text>=mainInformation</text>
      <FlowPanel>
        <FlowPanel class="flexBox-horizontal">
          <xi:include href="widgets/DocumentFields.widget.xml" />
          <FlowPanel style="display: table;">
            <Relations relColumn="Document" inline="true"
              defaultRelations="Companies Persons Requests Tasks" style="margin-left: 15px;" />
          </FlowPanel>
        </FlowPanel>
        <ChildGrid name="DocumentFiles" relColumn="Document" style="margin-top: 1ex; height: 400px;" />
      </FlowPanel>
    </page>

    <page data="Relations" for="Document">
      <text>=relations</text>
      <FlowPanel>
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Company" module="Classifiers.Contacts">
          <Label text="=companies" style="&chlabel;" />
          <ChildSelector name="Company" viewName="Companies" childTable="Relations"
            targetRelColumn="Document" sourceRelColumn="Company"
            renderColumns="Name" class="flexible" summarize="true" />
        </FlowPanel>

        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Person" module="Classifiers.Contacts">
          <Label text="=persons" style="&chlabel;" />
          <ChildSelector name="Person" class="flexible" viewName="Persons" childTable="Relations"
              targetRelColumn="Document" sourceRelColumn="Person"
              renderColumns="FirstName LastName" choiceColumns="FirstName LastName CompanyNames"
              searchableColumns="FirstName LastName" options="Company" summarize="true" />
        </FlowPanel>

        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Appointment" module="Calendar">
          <Label text="=calAppointments" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Appointments" childTable="Relations"
            targetRelColumn="Document" sourceRelColumn="Appointment"
            renderColumns="Summary" choiceColumns="Summary StartDateTime EndDateTime"
            newRowEnabled="false" summarize="true" />
        </FlowPanel>

        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Task" module="Tasks">
          <Label text="=crmTasks" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Tasks" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Task" renderColumns="Summary"
            choiceColumns="Summary ExecutorFirstName ExecutorLastName StartTime FinishTime"
            summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="CargoRequest" module="Transport.SelfService">
          <Label text="=trRequestsShort" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="CargoRequests" childTable="Relations"
            targetRelColumn="Document" sourceRelColumn="CargoRequest"
            renderColumns="CustomerCompanyName LoadingDate"
            choiceColumns="CustomerCompanyName LoadingDate LoadingCityName UnloadingCityName"
            summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Vehicle" module="Transport">
          <Label text="=vehiclesShort" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Vehicles" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Vehicle"
            renderColumns="Number" choiceColumns="Number ParentModelName ModelName"
            summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Driver" module="Transport">
          <Label text="=drivers" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Drivers" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Driver"
            renderColumns="FirstName LastName" newRowEnabled="false" summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="TransportationOrder" module="Transport">
          <Label text="=trOrders" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="TransportationOrders" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="TransportationOrder"
            renderColumns="OrderNo" choiceColumns="CustomerName Date OrderNo" summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Cargo" module="Transport">
          <Label text="=cargos" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="OrderCargo" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Cargo" renderColumns="Description"
            choiceColumns="Description LoadingDate LoadingCountryCode UnloadingDate UnloadingCountryCode"
            newRowEnabled="false" summarize="true" />
        </FlowPanel>
  
        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Trip" module="Transport">
          <Label text="=trips" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Trips" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Trip"
            renderColumns="TripNo" choiceColumns="Date PlannedEndDate TripNo VehicleNumber"
            summarize="true" />
        </FlowPanel>

        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="ServiceObject" module="Service">
          <Label text="=svcObjects" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="ServiceObjects" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="ServiceObject"
            renderColumns="Address" choiceColumns="Address CustomerName" summarize="true" />
        </FlowPanel>

        <FlowPanel class="flexBox-horizontal" style="&row;"
            data="Relations" for="Document" module="Documents">
          <Label text="=documents" style="&chlabel;" />
          <ChildSelector class="flexible" viewName="Documents" childTable="Relations" 
            targetRelColumn="Document" sourceRelColumn="Document"
            renderColumns="Name" newRowEnabled="false" />
        </FlowPanel>
      </FlowPanel>
    </page>

    <page module="Documents.Templates">
      <text>=content</text>
      <xi:include href="widgets/Content.widget.xml" />
    </page>
    <page module="Documents.Templates">
      <text>=criteria</text>
      <xi:include href="widgets/Criteria.widget.xml" />
    </page>
    <page module="Documents.Templates">
      <text>=documentItems</text>
      <ChildGrid name="DocumentItems" relColumn="Document" />
    </page>
  </TabbedPages>
</f:Form>  
