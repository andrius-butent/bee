<?xml version="1.0" encoding="UTF-8"?>
<BeeGrids xmlns="http://www.butent.com/bee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.butent.com/bee ../../schemas/grid.xsd">

  <BeeGrid name="TaskEvents" viewName="TaskEvents" caption="Įvykių istorija" readOnly="true"
           order="TaskEventID desc">
    <body height="60" />
    <columns>
      <BeeCalcColumn name="Publisher" type="string" caption="Paskelbta" width="130">
        <style>
          <bodyStyle>
            <inline>white-space: pre-wrap;</inline>
          </bodyStyle>
        </style>
        <calc>
          <function>
            var s = row.PublishTime.getFullYear() + "." + (row.PublishTime.getMonth() + 1) + "."
                  + row.PublishTime.getDate() + " " + row.PublishTime.toLocaleTimeString() + "\n"
                  + (row.PublisherFirstName || "") + " " + (row.PublisherLastName || "");
            var ev = "";
            
            switch(row.Event) {
              case 1:
                ev = "SUSPENDED";
                break;
              case 2:
                ev = "COMPLETED";
                break;
              case 3:
                ev = "APPROVED";
                break;
              case 4:
                ev = "CANCELED";
                break;
              case 5:
                ev = "FORWARDED";
                break;
              case 6:
                ev = "EXTENDED";
                break;
              case 7:
                ev = "RENEWED";
                break;
              case 8:
                ev = "COMMENTED";
                break;
              default:
                ev = "ACTIVATED";
                break;
            }
            s = s + "\n" + ev;
            return s;
          </function>
        </calc>
      </BeeCalcColumn>
      <BeeCalcColumn name="Comment" type="string" caption="Komentaras" minWidth="300">
        <style>
          <bodyStyle>
            <inline>white-space: pre-wrap;</inline>
          </bodyStyle>
        </style>
        <calc>
          <function>
            var s = "";
            
            if (row.EventNote) {
              s = row.EventNote;
            }
            if (row.Comment) {
              if (s) {
                s = s + "\n";
              }
              s = s + row.Comment;
            }
            return s;
          </function>
        </calc>
      </BeeCalcColumn>
      <BeeDataColumn name="EventDuration" source="EventDuration" caption="Trukmė min." />
      <BeeDataColumn name="DurationType" source="DurationType" caption="Tipas" />
    </columns>
  </BeeGrid>
</BeeGrids>
